<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AJAX</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <button id="button">Load text file</button>
</body>
<div id="data"></div>

<script>
    document.getElementById('button').addEventListener('click', loadText);

    function loadText() {
        // XHR Object
        var request = new XMLHttpRequest();
        console.log(request)
        request.open('GET', 'data.txt', true) // 1st we open the xhr

        //console.log('readyState = ', request.readyState)

        request.onload = function() {
            console.log('readyState = ', request.readyState)

            if (this.status == 200) {
                console.log(this.responseText)
                document.getElementById('data').innerHTML = this.responseText
            } else if (this.status = 404) {
                //do something
            }
        }

        // handle errors
        request.onerror = function() {
            alert('Oops! Something went wrong')
        }

        request.send()



        /* old school way :
        request.onreadystatechange = function() {

            if (this.readyState == 4 && this.status == 200) {
                console.log(this.responseText)
            }
        }*/

        /* readyState :
        0: request not initialized
        1: server connection established
        2: request received
        3: processing request
        4: request finished / response is ready
        */

        // progress method for loaders maybe
        request.onprogress = function() {
            console.log('readyState = ', request.readyState)

        }











    }
</script>

</html>